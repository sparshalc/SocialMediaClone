<div class="container">
  <div class="timeline-footer">
    <div class="likes">
      <hr>
      <%= turbo_frame_tag :likes do %>
        <% like = current_user.likes.find_by(post: @post) %>
        <div class="d-flex justify-content-between">
          <div class="like_count d-flex align-items-center">
            <% if like.nil? %>
              <div class="d-flex align-items-center gap-2">
                <%= button_to likes_path, params: { like: { post_id: @post.id } }, method: :post, class: 'btn' do %>
                  <i class="bi bi-hand-thumbs-up-fill h3"></i><span class="mx-2"><%= pluralize(post.likes.count, 'like') %></span>
                <% end %>
              </div>
            <% else %>
              <div class="d-flex gap-2">
                <%= button_to like_path(like), method: :delete, class: 'btn' do %>
                  <i class="bi bi-hand-thumbs-down-fill h3 "></i> <span class="mx-2"><%= pluralize(post.likes.count, 'like') %></span>
                <% end %>
              </div>
            <% end %>
            <div class="mt-2">
              <i class="bi bi-chat-dots-fill h4"></i>
              <span class="mx-2"><%= pluralize(post.comments.count, 'comment') %></span>
            </div>
          </div>
          <div class="like_avatars">
            <% if @post.likes.present? %>
              <div class="user-avatars">
                <span class="text-muted">Liked by</span>
                <% @post.likes.each do |like| %>
                  <%= image_tag(like.user.image.attached? ? like.user.image : 'https://avatars.githubusercontent.com/u/116902652?v=', width: '20px', class: ' rounded-circle mx-1')%>
                <% end %>
              </div>
            <% end %>
          </div>
        </div>
      <% end %>
      <hr>
    </div>
  </div>
</div>
